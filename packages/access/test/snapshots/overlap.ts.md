# Snapshot report for `test/overlap.ts`

The actual snapshot is saved in `overlap.ts.snap`.

Generated by [AVA](https://avajs.dev).

## overlap

> Snapshot 1

    [
      {
        name: 'administrator',
        resources: [
          {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          {
            actions: [
              '*',
            ],
            name: 'file',
          },
          {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                name: 'create',
              },
              {
                attributes: [
                  'active',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                  '!history',
                ],
                name: 'update',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'order',
          },
        ],
      },
      {
        name: 'operation',
        resources: [
          {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  'status',
                  'items',
                ],
                name: 'update',
              },
            ],
            name: 'configuration',
          },
          {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  'status',
                  'items',
                  'delivery',
                ],
                name: 'update',
              },
            ],
            name: 'order',
          },
          {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                  '!history',
                ],
                conditions: [
                  {
                    'subject.id': {
                      $eq: 'resource.authorId',
                    },
                  },
                  {
                    'subject.id': {
                      $ne: undefined,
                    },
                  },
                ],
                name: 'read',
                scope: {
                  valid: true,
                },
              },
              {
                attributes: [
                  '*',
                  '!history',
                  '!active',
                ],
                name: 'update',
              },
            ],
            name: 'product',
          },
        ],
      },
    ]

> Snapshot 2

    Map {
      'configuration' => {
        actions: [
          '*',
        ],
        name: 'configuration',
      },
      'file' => {
        actions: [
          '*',
        ],
        name: 'file',
      },
      'user' => {
        actions: [
          {
            attributes: [
              '*',
            ],
            name: 'create',
          },
          {
            attributes: [
              '*',
            ],
            name: 'read',
          },
          {
            attributes: [
              '*',
            ],
            name: 'update',
          },
        ],
        name: 'user',
      },
      'product' => {
        actions: [
          {
            attributes: [
              '*',
              'active',
            ],
            conditions: [],
            name: 'create',
            scope: {},
          },
          {
            attributes: [
              '*',
              'active',
            ],
            conditions: [],
            name: 'read',
            scope: {},
          },
          {
            attributes: [
              '*',
            ],
            conditions: [],
            name: 'update',
            scope: {},
          },
          {
            attributes: [
              '*',
            ],
            name: 'delete',
          },
        ],
        name: 'product',
      },
      'order' => {
        actions: [
          {
            attributes: [
              '*',
            ],
            conditions: [],
            name: 'create',
            scope: {},
          },
          {
            attributes: [
              '*',
            ],
            conditions: [],
            name: 'read',
            scope: {},
          },
          {
            attributes: [
              '*',
            ],
            conditions: [],
            name: 'update',
            scope: {},
          },
        ],
        name: 'order',
      },
    }

## result object with merged (union) actions inside resource

> Snapshot 1

    {
      create: {
        attributes: [
          '*',
          'active',
        ],
        name: 'create',
      },
      delete: {
        attributes: [
          '*',
        ],
        name: 'delete',
      },
      read: {
        attributes: [
          '*',
          '!history',
        ],
        conditions: [
          {
            'subject.id': {
              $eq: 'resource.authorId',
            },
          },
          {
            'subject.id': {
              $ne: undefined,
            },
          },
        ],
        name: 'read',
        scope: {
          valid: true,
        },
      },
      update: {
        attributes: [
          '*',
          '!history',
          '!active',
        ],
        name: 'update',
      },
    }

> Snapshot 2

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

## result object with the most permissive action applied and granted access to custom action

> Snapshot 1

    '*'

## result object with all allowed attributes in action - all attributes

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        attributes: [
          '*',
          'active',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          'file' => {
            actions: [
              '*',
            ],
            name: 'file',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              name: 'delete',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'administrator',
            resources: [
              {
                actions: [
                  '*',
                ],
                name: 'configuration',
              },
              {
                actions: [
                  '*',
                ],
                name: 'file',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'active',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'delete',
                  },
                ],
                name: 'product',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
            ],
          },
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with all allowed attributes in action - filtered all attributes

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        attributes: [
          '*',
          'active',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          'file' => {
            actions: [
              '*',
            ],
            name: 'file',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              name: 'delete',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'administrator',
            resources: [
              {
                actions: [
                  '*',
                ],
                name: 'configuration',
              },
              {
                actions: [
                  '*',
                ],
                name: 'file',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'active',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'delete',
                  },
                ],
                name: 'product',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
            ],
          },
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with all allowed attributes in action - projected attributes

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
      ],
      name: 'order',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        attributes: [
          '*',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  'status',
                  'items',
                ],
                name: 'update',
              },
            ],
            name: 'configuration',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  '!history',
                ],
                conditions: [
                  {
                    'subject.id': {
                      $eq: 'resource.authorId',
                    },
                  },
                  {
                    'subject.id': {
                      $ne: undefined,
                    },
                  },
                ],
                name: 'read',
                scope: {
                  valid: true,
                },
              },
              {
                attributes: [
                  '*',
                  '!history',
                  '!active',
                ],
                name: 'update',
              },
            ],
            name: 'product',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                  '!password',
                ],
                name: 'update',
              },
              {
                attributes: [
                  'firstName',
                  'lastName',
                ],
                conditions: [
                  {
                    'resource.createdAt': {
                      $lte: Date 2020-10-21 06:00:00 UTC {},
                    },
                  },
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
          ],
          name: 'order',
        },
        roles: [
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
          {
            name: 'support',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      '!password',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      'firstName',
                      'lastName',
                    ],
                    conditions: [
                      {
                        'resource.createdAt': {
                          $lte: Date 2020-10-21 06:00:00 UTC {},
                        },
                      },
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    conditions: [
                      {
                        'resource.items': {
                          $where: Function $where {},
                        },
                      },
                    ],
                    name: 'export',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      '!isActive',
                    ],
                    conditions: [
                      {
                        'subject.address.country': {
                          $eq: 'Canada',
                        },
                      },
                      {
                        'resource.sku': {
                          $lte: 5000,
                        },
                      },
                      {
                        'resource.createdAt': {
                          $gte: Date 2020-10-21 06:00:00 UTC {},
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      namespace: '*.merchant.products',
                      products: [
                        1,
                        229,
                        3394,
                      ],
                    },
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with all allowed attributes in action - mixed attributes

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        attributes: [
          '*',
          'active',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          'file' => {
            actions: [
              '*',
            ],
            name: 'file',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              name: 'delete',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'administrator',
            resources: [
              {
                actions: [
                  '*',
                ],
                name: 'configuration',
              },
              {
                actions: [
                  '*',
                ],
                name: 'file',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'active',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'delete',
                  },
                ],
                name: 'product',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
            ],
          },
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with all allowed attributes in action - negated attributes

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        attributes: [
          '*',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          'file' => {
            actions: [
              '*',
            ],
            name: 'file',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              name: 'delete',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'administrator',
            resources: [
              {
                actions: [
                  '*',
                ],
                name: 'configuration',
              },
              {
                actions: [
                  '*',
                ],
                name: 'file',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'active',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'delete',
                  },
                ],
                name: 'product',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
            ],
          },
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with the most permissive conditions applied

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        attributes: [
          '*',
          'active',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          'file' => {
            actions: [
              '*',
            ],
            name: 'file',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              name: 'delete',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'administrator',
            resources: [
              {
                actions: [
                  '*',
                ],
                name: 'configuration',
              },
              {
                actions: [
                  '*',
                ],
                name: 'file',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'active',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'delete',
                  },
                ],
                name: 'product',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
            ],
          },
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with all conditions merged

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            '!history',
          ],
          conditions: [
            {
              'subject.id': {
                $eq: 'resource.authorId',
              },
            },
            {
              'subject.id': {
                $ne: undefined,
              },
            },
          ],
          name: 'read',
          scope: {
            valid: true,
          },
        },
        {
          attributes: [
            '*',
            '!history',
            '!active',
          ],
          name: 'update',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            '!history',
          ],
          conditions: [
            {
              'subject.id': {
                $eq: 'resource.authorId',
              },
            },
            {
              'subject.id': {
                $ne: undefined,
              },
            },
          ],
          name: 'read',
          scope: {
            valid: true,
          },
        },
        attributes: [
          '*',
          '!history',
        ],
        conditions: [
          {
            'subject.id': {
              $eq: 'resource.authorId',
            },
          },
          {
            'subject.id': {
              $ne: undefined,
            },
          },
        ],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  'status',
                  'items',
                ],
                name: 'update',
              },
            ],
            name: 'configuration',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  '!history',
                ],
                conditions: [
                  {
                    'subject.id': {
                      $eq: 'resource.authorId',
                    },
                  },
                  {
                    'subject.id': {
                      $ne: undefined,
                    },
                  },
                ],
                name: 'read',
                scope: {
                  valid: true,
                },
              },
              {
                attributes: [
                  '*',
                  '!history',
                  '!active',
                ],
                name: 'update',
              },
            ],
            name: 'product',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                  '!password',
                ],
                name: 'update',
              },
              {
                attributes: [
                  'firstName',
                  'lastName',
                ],
                conditions: [
                  {
                    'resource.createdAt': {
                      $lte: Date 2020-10-21 06:00:00 UTC {},
                    },
                  },
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                '!history',
              ],
              conditions: [
                {
                  'subject.id': {
                    $eq: 'resource.authorId',
                  },
                },
                {
                  'subject.id': {
                    $ne: undefined,
                  },
                },
              ],
              name: 'read',
              scope: {
                valid: true,
              },
            },
            {
              attributes: [
                '*',
                '!history',
                '!active',
              ],
              name: 'update',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
          {
            name: 'support',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      '!password',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      'firstName',
                      'lastName',
                    ],
                    conditions: [
                      {
                        'resource.createdAt': {
                          $lte: Date 2020-10-21 06:00:00 UTC {},
                        },
                      },
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    conditions: [
                      {
                        'resource.items': {
                          $where: Function $where {},
                        },
                      },
                    ],
                    name: 'export',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      '!isActive',
                    ],
                    conditions: [
                      {
                        'subject.address.country': {
                          $eq: 'Canada',
                        },
                      },
                      {
                        'resource.sku': {
                          $lte: 5000,
                        },
                      },
                      {
                        'resource.createdAt': {
                          $gte: Date 2020-10-21 06:00:00 UTC {},
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      namespace: '*.merchant.products',
                      products: [
                        1,
                        229,
                        3394,
                      ],
                    },
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {
          valid: true,
        },
      },
    }

## result object with the most permissive scope applied

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'update',
          scope: {},
        },
        {
          attributes: [
            '*',
          ],
          name: 'delete',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            'active',
          ],
          conditions: [],
          name: 'read',
          scope: {},
        },
        attributes: [
          '*',
          'active',
        ],
        conditions: [],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              '*',
            ],
            name: 'configuration',
          },
          'file' => {
            actions: [
              '*',
            ],
            name: 'file',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'create',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  '*',
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  'active',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                name: 'delete',
              },
            ],
            name: 'product',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                'active',
              ],
              conditions: [],
              name: 'read',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'update',
              scope: {},
            },
            {
              attributes: [
                '*',
              ],
              name: 'delete',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'administrator',
            resources: [
              {
                actions: [
                  '*',
                ],
                name: 'configuration',
              },
              {
                actions: [
                  '*',
                ],
                name: 'file',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'active',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'delete',
                  },
                ],
                name: 'product',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
            ],
          },
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {},
      },
    }

## result object with all scopes merged

> Snapshot 1

    {
      actions: [
        {
          attributes: [
            '*',
          ],
          conditions: [],
          name: 'create',
          scope: {},
        },
        {
          attributes: [
            '*',
            '!history',
          ],
          conditions: [
            {
              'subject.id': {
                $eq: 'resource.authorId',
              },
            },
            {
              'subject.id': {
                $ne: undefined,
              },
            },
          ],
          name: 'read',
          scope: {
            valid: true,
          },
        },
        {
          attributes: [
            '*',
            '!history',
            '!active',
          ],
          name: 'update',
        },
      ],
      name: 'product',
    }

> Snapshot 2

    Permission {
      options: {
        action: {
          attributes: [
            '*',
            '!history',
          ],
          conditions: [
            {
              'subject.id': {
                $eq: 'resource.authorId',
              },
            },
            {
              'subject.id': {
                $ne: undefined,
              },
            },
          ],
          name: 'read',
          scope: {
            valid: true,
          },
        },
        attributes: [
          '*',
          '!history',
        ],
        conditions: [
          {
            'subject.id': {
              $eq: 'resource.authorId',
            },
          },
          {
            'subject.id': {
              $ne: undefined,
            },
          },
        ],
        granted: true,
        grants: Map {
          'configuration' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                name: 'read',
              },
              {
                attributes: [
                  'status',
                  'items',
                ],
                name: 'update',
              },
            ],
            name: 'configuration',
          },
          'order' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'read',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'update',
                scope: {},
              },
            ],
            name: 'order',
          },
          'product' => {
            actions: [
              {
                attributes: [
                  '*',
                ],
                conditions: [],
                name: 'create',
                scope: {},
              },
              {
                attributes: [
                  '*',
                  '!history',
                ],
                conditions: [
                  {
                    'subject.id': {
                      $eq: 'resource.authorId',
                    },
                  },
                  {
                    'subject.id': {
                      $ne: undefined,
                    },
                  },
                ],
                name: 'read',
                scope: {
                  valid: true,
                },
              },
              {
                attributes: [
                  '*',
                  '!history',
                  '!active',
                ],
                name: 'update',
              },
            ],
            name: 'product',
          },
          'user' => {
            actions: [
              {
                attributes: [
                  '*',
                  '!password',
                ],
                name: 'update',
              },
              {
                attributes: [
                  'firstName',
                  'lastName',
                ],
                conditions: [
                  {
                    'resource.createdAt': {
                      $lte: Date 2020-10-21 06:00:00 UTC {},
                    },
                  },
                ],
                name: 'update',
              },
            ],
            name: 'user',
          },
        },
        resource: {
          actions: [
            {
              attributes: [
                '*',
              ],
              conditions: [],
              name: 'create',
              scope: {},
            },
            {
              attributes: [
                '*',
                '!history',
              ],
              conditions: [
                {
                  'subject.id': {
                    $eq: 'resource.authorId',
                  },
                },
                {
                  'subject.id': {
                    $ne: undefined,
                  },
                },
              ],
              name: 'read',
              scope: {
                valid: true,
              },
            },
            {
              attributes: [
                '*',
                '!history',
                '!active',
              ],
              name: 'update',
            },
          ],
          name: 'product',
        },
        roles: [
          {
            name: 'operation',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                ],
                name: 'configuration',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                      'delivery',
                    ],
                    name: 'update',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      'active',
                    ],
                    name: 'create',
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                    ],
                    conditions: [
                      {
                        'subject.id': {
                          $eq: 'resource.authorId',
                        },
                      },
                      {
                        'subject.id': {
                          $ne: undefined,
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      valid: true,
                    },
                  },
                  {
                    attributes: [
                      '*',
                      '!history',
                      '!active',
                    ],
                    name: 'update',
                  },
                ],
                name: 'product',
              },
            ],
          },
          {
            name: 'support',
            resources: [
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      '!password',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      'firstName',
                      'lastName',
                    ],
                    conditions: [
                      {
                        'resource.createdAt': {
                          $lte: Date 2020-10-21 06:00:00 UTC {},
                        },
                      },
                    ],
                    name: 'update',
                  },
                ],
                name: 'user',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                    ],
                    name: 'read',
                  },
                  {
                    attributes: [
                      'status',
                      'items',
                    ],
                    name: 'update',
                  },
                  {
                    attributes: [
                      '*',
                    ],
                    conditions: [
                      {
                        'resource.items': {
                          $where: Function $where {},
                        },
                      },
                    ],
                    name: 'export',
                  },
                ],
                name: 'order',
              },
              {
                actions: [
                  {
                    attributes: [
                      '*',
                      '!isActive',
                    ],
                    conditions: [
                      {
                        'subject.address.country': {
                          $eq: 'Canada',
                        },
                      },
                      {
                        'resource.sku': {
                          $lte: 5000,
                        },
                      },
                      {
                        'resource.createdAt': {
                          $gte: Date 2020-10-21 06:00:00 UTC {},
                        },
                      },
                    ],
                    name: 'read',
                    scope: {
                      namespace: '*.merchant.products',
                      products: [
                        1,
                        229,
                        3394,
                      ],
                    },
                  },
                ],
                name: 'product',
              },
            ],
          },
        ],
        scope: {
          valid: true,
        },
      },
    }
